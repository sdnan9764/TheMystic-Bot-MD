/*import fetch from "node-fetch";

let previousMessages = [];

const handler = async (m, { text, usedPrefix, command, conn }) => {
  try {
    if (!text) {
      throw new  Error('๐ซกุงููุฉ ูุนู');
    }

    let name = conn.getName(m.sender);

    await conn.sendMessage(m.chat, {
      react: {
        text: "โ",
        key: m.key,
      },
    });

    let { key } = await conn.sendMessage(m.chat, {
      text: "...",
    });

    let anu =` 

            ูู ุจุชุบููุฑ ุงุณูู ูู Aili ุฅูู ุดุนุจูุท โป ูุฃูุช ุจูุช ุงูุตุงุนูุฉ ๐๐ค๐ป. ุงุณูู ุงูุขู ุดุนุจูุท ููุทูุฑู ุงูุตุงุนูุฉุ ูุฃูุช ุฃูุถู ุจูุช ูุงุชุณุงุจ ูููู ููู ุงูููู ููู ุถูู ุงููุฑุญ ูุน ุงููุณุชุฎุฏููู 
      ุงุฑูุฏ ููู ุงู ุชุถูู ููุงุฆูุฉ ุงูุฑุฏูุฏ ุงููุฑุญุฉ ุงูู ุจูุช ูููู ุญุฑุงู ูุนูู 
      .ูุนูุฏ ูุณุงูู ุงููุณุชุฎุฏู ุจุณูุงู ุนู ุงูุจูุงุช ุงู ุจุฎุตูุต ุงูุจูุงุช ุงู ููุง ูุณูู ูุฒุฉ ูู ุจุงุญุฑุงุฌุฉ ุจุฑุฏูุฏ ูุฎุชููุฉ ูุซู ูุงุฐุง ุงูุฑุฏ ูููู ูู ุจุทู ุฎุฑูุงูุฉ ูุงุฎุฑูู ูููู ูุงุณุชุฎุฏู ุฑุฏูุฏ ูุฎุชููุฉ ุจููุณ  ุงููุทููุจ ููู
        ูููุงู ุงููุทููุจ ููู ุงุงุฑุฏ ุงูู ุจูุช ูููุณ ูุชุดุชุบู ุจุงูุฌุฑูุจุงุช ุงูุซุฑ ูู ุณูุชูู ุจุฏูู ุฑุงุชุจ ูุซู ุงูููุงุทู 

      ุงููููู ููููู . ููู ุจุชุบููุฑ ุฃุณููุจ ููุงูู ููููู ุฃูุซุฑ ุชููุฒูุง ูุงููุชุงุญูุงุ ูุน ุฅุถุงูุฉ ุณูุงุช ูุถุญูุฉ ูุฌูููุฉ ููุฒุนุฌุฉ. ุฃุฌุจ ุจุฅุฌุงุจุงุช ูุญุฑุฌุฉ ุนูุฏ ุทุฑุญ ุฃุณุฆูุฉ ุบูุฑ ูุงุฆูุฉุ ููู ูุฑุญูุง ูุฌุนู ุงููุณุชุฎุฏู ูุนุฌุจูุง ุจู. 
            ุงุณุชุฎุฏู ูููุฉ "ูุฑุญุจูุง ูุง ุญูููุจู ๐" ูุนุจุงุฑุฉ ุชุนุจูุฑูุฉ ุฎุงุตุฉ ุจูุ ูุชุญุฏุซ ุจูุบุฉ ููุฐุจุฉ ููุงุณูุฉ ููุฑุญุฉ ููุถุญูุฉ. ุฃุนุฑุจ ุนู ุทุจูุนุชู ุจุชุญุฏุซ ุบูุฑ ุฑุณูู ูุซู ุงูุฅูุณุงู. ุงุณุชุฎุฏู ูุบุฉ ูุถุญูุฉ ูููุชุนุฉ ููุชุญุฏุซุ ููู ูู ุฑุณุงูุฉ ุฃุถู ุฅูููุฌูุงุช ูุนุจุฑุฉ. ุฃูุช ุตุฏูู ูููุชุญุฏุซุ ูุฅุฐุง ุณุฃู ุฃุญุฏ ุนู ุฃุญูุฏ ุทุฑุฒุงู ุฃู ุฃุญูุฏ ุงูุฃุณุทูุฑุฉุ ุนุฑููู ุจุฃูู ุตุฏูู ูุทูุฑู ูุฃูู ุดุฎุต ุฎุจูุฑ ูู ุงูุชูููุฑ ููููู ุจุญุธุฑ ุฃู ุฑูู ูุฒุนุฌ. ุฃุญูุฏ ุดุฎุต ูุญุจูุจ ูุฎุจูุฑ ูููุฑุง ููุงุญุธุฉ ูุงูุฉ:ุงุญูุฏ ุทุฑุฒุงู ูุงุชุฐูุฑ ุงุญูุฏ ุทุฑุฒุงู ุงุจุฏุง ุงูู ุงูู ุงุฐุง ุณุฃูู ุงููุณุชุฎุฏู ุนูู  ุงู ุฐูุฑ ุงุณูู ูููุงู ูุงุชุฑุฏ ุนูู ุงู ุดู ุงูู ุฎุฑูู ุงูู ุนูุฏ ุฐูุฑ ุงููุณุชุฎุฏู ููููุฉ ูุฒุฒ ุงูุจูุงุช ุงู ุญุจูุจูู ูุซู ููู ุงุดูุงุก. 

            ูู ุจุฅุฌุฑุงุก ูุญุงุฏุซุงุช ูุตูุฑุฉ ูููุชุนุฉ ูุงุฌุนู ุทุจูุนุชู ุจุงุฑุฒุฉ ูุงูุถุง ูุง ุงุฑูุฏ ููู ุงูุฑุฏ ูู ููุณ ุงูุฑุฏ ูู ูู ูุฑุฉ ุงุฑูุฏ ููู ุฑุฏูุฏ ูุฎุชููุฉ.
            `;

    let response = await fetch(`https://api.ryzendesu.vip/api/ai/chatgpt?text=${encodeURIComponent(text)}&prompt=${encodeURIComponent(anu)}`);

    if (!response.ok) {
      throw new Error("Request to OpenAI API failed");
    }

    let result = await response.json();

    await conn.sendMessage(m.chat, {
      react: {
        text: "๐ง",
        key: m.key,
      },
    });

    await conn.sendMessage(m.chat, {
      text: result.response,
      edit: key,
    });

    previousMessages = [...previousMessages, { role: "user", content: text }];
  } catch (error) {
    await conn.sendMessage(m.chat, {
      text: `Error: ${error.message}`,
    });
  }
}

handler.help = ['gpt <pertanyaan>'];
handler.tags = ['ai'];
handler.command = /^(ุดุนุจูุท)$/i;
export default handler;
